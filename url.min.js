"use strict";const ns="undefined"!=typeof module&&module.exports?module:window;var RX_PROTOCOL=/^[a-z]+:/,RX_PORT=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,RX_CREDS=/\/\/(.*?)(?::(.*?))?@/,RX_WIN=/^win/i,RX_PROTOCOL_REPL=/:$/,RX_QUERY_REPL=/^\?/,RX_HASH_REPL=/^#/,RX_PATH=/(.*\/)/,RX_PATH_FIX=/^\/{2,}/,RX_PATH_IE_FIX=/(^\/?)/,RX_SINGLE_QUOTE=/'/g,RX_DECODE_1=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,RX_DECODE_2=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,RX_DECODE_3=/%([0-7][0-9a-f])/gi,RX_PLUS=/\+/g,RX_PATH_SEMI=/^\w:$/,RX_URL_TEST=/[^/#?]/;function urlConfig(t){var e={path:!0,query:!0,hash:!0};return t&&RX_PROTOCOL.test(t)&&(e.protocol=!0,e.host=!0,RX_PORT.test(t)&&(e.port=!0),RX_CREDS.test(t)&&(e.user=!0,e.pass=!0)),e}var _currNodeUrl,isNode="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,isIe=!isNode&&ns.navigator&&ns.navigator.userAgent&&~ns.navigator.userAgent.indexOf("MSIE"),nodeRequire=isNode?ns.require:null,map={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},defaultPorts={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function getCurrUrl(){return isNode?_currNodeUrl=_currNodeUrl||"file://"+(process.platform.match(RX_WIN)?"/":"")+nodeRequire("fs").realpathSync("."):("about:srcdoc"===document.location.href?self.parent.document:document).location.href}function parse(t,e,r){var o,n;e=e||getCurrUrl(),isNode?o=nodeRequire("url").parse(e):(o=document.createElement("a")).href=e;var a=urlConfig(e),s=e.match(RX_CREDS)||[];for(n in map)a[n]?t[n]=o[map[n]]||"":t[n]="";t.protocol=t.protocol.replace(RX_PROTOCOL_REPL,""),t.query=t.query.replace(RX_QUERY_REPL,""),t.hash=decode(t.hash.replace(RX_HASH_REPL,"")),t.user=decode(s[1]||""),t.pass=decode(s[2]||""),t.port=defaultPorts[t.protocol]==t.port||0==t.port?"":t.port,!a.protocol&&RX_URL_TEST.test(e.charAt(0))&&(t.path=e.split("?")[0].split("#")[0]),(t=updatePath(t,a.protocol,r,e)).paths(t.paths()),t.query=new QueryString(t.query)}function updatePath(t,e,r,o){if(!e&&r){var n,a=new Url(getCurrUrl().match(RX_PATH)[0]),s=a.path.split("/"),i=t.path.split("/");s.pop();for(n of["protocol","user","pass","host","port"])t[n]=a[n];for(;".."===i[0];)s.pop(),i.shift();t.path=("/"!==o.charAt(0)?s.join("/"):"")+"/"+i.join("/")}return t.path=t.path.replace(RX_PATH_FIX,"/"),isIe&&(t.path=t.path.replace(RX_PATH_IE_FIX,"/")),t}function encode(t){return encodeURIComponent(t).replace(RX_SINGLE_QUOTE,"%27")}function decode(t){return(t=(t=(t=t.replace(RX_PLUS," ")).replace(RX_DECODE_1,function(t,e,r,o){e=parseInt(e,16)-224,r=parseInt(r,16)-128;if(0==e&&r<32)return t;o=(e<<12)+(r<<6)+(parseInt(o,16)-128);return 65535<o?t:String.fromCharCode(o)})).replace(RX_DECODE_2,function(t,e,r){e=parseInt(e,16)-192;if(e<2)return t;r=parseInt(r,16)-128;return String.fromCharCode((e<<6)+r)})).replace(RX_DECODE_3,function(t,e){return String.fromCharCode(parseInt(e,16))})}function QueryString(t){for(var e=t.split("&"),r=0,o=e.length;r<o;r++){var n=e[r].split("="),a=decodeURIComponent(n[0].replace(RX_PLUS," "));a&&(n=void 0!==n[1]?decode(n[1]):null,void 0===this[a]?this[a]=n:(this[a]instanceof Array||(this[a]=[this[a]]),this[a].push(n)))}}function buildArrayParam(e,r,o){if(o.length)for(let t=0;t<o.length;t++)void 0!==o[t]&&(e=updateParams(e,r,o[t]));else e=updateParams(e,r,"");return e}function updateParams(t,e,r){return t+=t?"&":"",t+=encode(e)+(null===r?"":"="+encode(r))}function Url(t,e){parse(this,t,!e)}QueryString.prototype.toString=function(){var t,e="";for(t in this){var r=this[t];r instanceof Array?e=buildArrayParam(e,t,r):r instanceof Function||void 0===r||(e=updateParams(e,t,r))}return e},Url.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},Url.prototype.queryLength=function(){var t,e=0;for(t in this.query)this.query[t]instanceof Function||e++;return e},Url.prototype.isEmptyQuery=function(){return 0===this.queryLength()},Url.prototype.paths=function(t){var e,r="",o=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(r="/"),e=t.length;o<e;o++)t[o]=!o&&RX_PATH_SEMI.test(t[o])?t[o]:encode(t[o]);this.path=r+t.join("/")}for(e=(t=("/"===this.path.charAt(o=0)?this.path.slice(1):this.path).split("/")).length;o<e;o++)t[o]=decode(t[o]);return t},Url.prototype.encode=encode,Url.prototype.decode=decode,Url.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},Url.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&encode(this.user)+(this.pass&&":"+encode(this.pass))+"@")+this.host+(this.port&&":"+this.port)+this.path+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+encode(this.hash))},ns[ns.exports?"exports":"Url"]=Url;