"use strict";const ns="undefined"!=typeof module&&module.exports?module:window;var RX_PROTOCOL=/^[a-z]+:/,RX_PORT=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,RX_CREDS=/\/\/(.*?)(?::(.*?))?@/,RX_WIN=/^win/i,RX_PROTOCOL_REPL=/:$/,RX_QUERY_REPL=/^\?/,RX_HASH_REPL=/^#/,RX_PATH=/(.*\/)/,RX_PATH_FIX=/^\/{2,}/,RX_PATH_IE_FIX=/(^\/?)/,RX_SINGLE_QUOTE=/'/g,RX_DECODE_1=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,RX_DECODE_2=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,RX_DECODE_3=/%([0-7][0-9a-f])/gi,RX_PLUS=/\+/g,RX_PATH_SEMI=/^\w:$/,RX_URL_TEST=/[^/#?]/;function urlConfig(t){var r={path:!0,query:!0,hash:!0};return t&&RX_PROTOCOL.test(t)&&(r.protocol=!0,r.host=!0,RX_PORT.test(t)&&(r.port=!0),RX_CREDS.test(t)&&(r.user=!0,r.pass=!0)),r}var _currNodeUrl,isNode="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,isIe=!isNode&&ns.navigator&&ns.navigator.userAgent&&~ns.navigator.userAgent.indexOf("MSIE"),nodeRequire=isNode?ns.require:null,map={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},defaultPorts={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function getCurrUrl(){return isNode?_currNodeUrl=_currNodeUrl||"file://"+(process.platform.match(RX_WIN)?"/":"")+nodeRequire("fs").realpathSync("."):("about:srcdoc"===document.location.href?self.parent.document:document).location.href}function parse(t,r,e){var o,n;r=r||getCurrUrl(),isNode?o=nodeRequire("url").parse(r):(o=document.createElement("a")).href=r;var a=urlConfig(r),s=r.match(RX_CREDS)||[];for(n in map)a[n]?t[n]=o[map[n]]||"":t[n]="";t.protocol=t.protocol.replace(RX_PROTOCOL_REPL,""),t.query=t.query.replace(RX_QUERY_REPL,""),t.hash=decode(t.hash.replace(RX_HASH_REPL,"")),t.user=decode(s[1]||""),t.pass=decode(s[2]||""),t.port=defaultPorts[t.protocol]==t.port||0==t.port?"":t.port,!a.protocol&&RX_URL_TEST.test(r.charAt(0))&&(t.path=r.split("?")[0].split("#")[0]),(t=updatePath(t,a.protocol,e,r)).paths(t.paths()),t.query=new QueryString(t.query)}function updatePath(t,r,e,o){if(!r&&e){var n,a=new Url(getCurrUrl().match(RX_PATH)[0]),s=a.path.split("/"),i=t.path.split("/");s.pop();for(n of["protocol","user","pass","host","port"])t[n]=a[n];for(;".."===i[0];)s.pop(),i.shift();t.path=("/"!==o.charAt(0)?s.join("/"):"")+"/"+i.join("/")}return t.path=t.path.replace(RX_PATH_FIX,"/"),isIe&&(t.path=t.path.replace(RX_PATH_IE_FIX,"/")),t}function encode(t){return encodeURIComponent(t).replace(RX_SINGLE_QUOTE,"%27")}function decode(t){return(t=(t=(t=t.replace(RX_PLUS," ")).replace(RX_DECODE_1,function(t,r,e,o){r=parseInt(r,16)-224,e=parseInt(e,16)-128;if(0==r&&e<32)return t;o=(r<<12)+(e<<6)+(parseInt(o,16)-128);return 65535<o?t:String.fromCharCode(o)})).replace(RX_DECODE_2,function(t,r,e){r=parseInt(r,16)-192;if(r<2)return t;e=parseInt(e,16)-128;return String.fromCharCode((r<<6)+e)})).replace(RX_DECODE_3,function(t,r){return String.fromCharCode(parseInt(r,16))})}function QueryString(t){for(var r=t.split("&"),e=0,o=r.length;e<o;e++){var n=r[e].split("="),a=decodeURIComponent(n[0].replace(RX_PLUS," "));a&&(n=void 0!==n[1]?decode(n[1]):null,void 0===this[a]?this[a]=n:(this[a]instanceof Array||(this[a]=[this[a]]),this[a].push(n)))}}function buildArrayParam(t,r,e){if(e.length)for(var o of e)void 0!==o&&(t=updateParams(t,r,o));else t=updateParams(t,r,"");return t}function updateParams(t,r,e){return t+=t?"&":"",t+=encode(r)+(null===e?"":"="+encode(e))}function Url(t,r){parse(this,t,!r)}QueryString.prototype.toString=function(){var t,r="";for(t in this){var e=this[t];e instanceof Array?r=buildArrayParam(r,t,e):e instanceof Function||void 0===e||(r=updateParams(r,t,e))}return r},Url.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},Url.prototype.queryLength=function(){var t,r=0;for(t in this.query)this.query[t]instanceof Function||r++;return r},Url.prototype.isEmptyQuery=function(){return 0===this.queryLength()},Url.prototype.paths=function(t){var r,e="",o=0;if(t&&t.length){for(this.isAbsolute()&&(e="/"),r=t.length;o<r;o++)t[o]=!o&&RX_PATH_SEMI.test(t[o])?t[o]:encode(t[o]);this.path=e+t.join("/")}for(r=(t=("/"===this.path.charAt(o=0)?this.path.slice(1):this.path).split("/")).length;o<r;o++)t[o]=decode(t[o]);return t},Url.prototype.encode=encode,Url.prototype.decode=decode,Url.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},Url.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&encode(this.user)+(this.pass&&":"+encode(this.pass))+"@")+this.host+(this.port&&":"+this.port)+this.path+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+encode(this.hash))},ns[ns.exports?"exports":"Url"]=Url;